# Application Pipeline Entry Schema
# Each pipeline YAML file follows this structure.
# Required fields marked with (required), all others optional.

# --- Identification ---
# id (required): kebab-case unique identifier, matches filename
#   e.g. "creative-capital-2027"
# name (required): Human-readable target name
#   e.g. "Creative Capital 2027 Open Call"
# track (required): Application category
#   enum: grant | residency | job | fellowship | writing | emergency | prize | program | consulting
# status (required): Current pipeline stage
#   enum: research | qualified | drafting | staged | deferred | submitted | acknowledged | interview | outcome
#   deferred: Ready to submit but blocked by external factors (portal paused, cycle not open, etc.)
# outcome: Final result (null until resolved)
#   enum: accepted | rejected | withdrawn | expired | null

# --- Target Information ---
# target:
#   organization (required): Name of the funding/hiring organization
#   url: Organization homepage
#   application_url: Direct link to application form/portal
#   portal: Application submission platform
#     enum: submittable | slideroom | email | custom | web | greenhouse | workable | lever | ashby | smartrecruiters
#   location: Raw location string from job posting API (e.g. "San Francisco, CA", "Remote - US")
#   location_class: US accessibility classification (populated by source_jobs.py)
#     enum: us-onsite | us-remote | remote-global | international | unknown

# --- Deadline ---
# deadline:
#   date: ISO date (YYYY-MM-DD) or null for rolling
#   time: Time with timezone, e.g. "15:00 ET"
#   type (required): Deadline behavior
#     enum: hard | rolling | window | tba | fixed
#     fixed: Specific date set by organization for recurring/cycle deadlines

# --- Compensation ---
# amount:
#   value: Numeric amount (0 for unpaid programs)
#   currency: ISO currency code (USD, EUR)
#   type: Compensation structure
#     enum: lump_sum | stipend | salary | fee | in_kind | variable
#   benefits_cliff_note: Impact on SNAP/Medicaid/Fair Fares (consult NYLAG)

# --- Fit Assessment ---
# fit:
#   score (required): 1-10 composite fit rating (weighted from dimensions)
#   identity_position: Which framing to use
#     enum: systems-artist | creative-technologist | educator | community-practitioner | independent-engineer
#   framing: One-line description of how to position for this target
#   extracted_keywords: List of top keywords extracted from the posting text
#     Populated by distill_keywords.py; used for block matching and signal analysis
#   lead_organs: Which ORGANVM organs to emphasize (list of roman numerals)
#   dimensions: Per-dimension scores (1-10 each, see strategy/scoring-rubric.md)
#     mission_alignment: How well work fits their mission (25% weight)
#     evidence_match: Can we demonstrate what they require (20%)
#     track_record_fit: Do credentials match expectations (15%)
#     financial_alignment: Benefits cliff risk (10%)
#     effort_to_value: Probability × value relative to effort (10%)
#     strategic_value: Credibility signal if accepted (10%)
#     deadline_feasibility: Can materials be ready in time (5%)
#     portal_friction: Submission mechanical complexity (5%)

# --- Submission Effort ---
# submission:
#   effort_level: Estimated work to prepare and submit
#     enum: quick | standard | deep | complex
#     quick: 15-45 min — paste blocks, fill form, submit
#     standard: 1-2 hours — compose from blocks, customize framing
#     deep: 3-6 hours — custom narrative, budget, multi-section
#     complex: 1-2 days — new materials, video, recommendations

# --- Submission Composition ---
# submission:
#   blocks_used: Map of slot → block path
#     artist_statement: identity/2min
#     project_description: projects/organvm-system
#     methodology: methodology/ai-conductor
#   variant_ids: Map of material type → variant path
#     cover_letter: cover-letters/grant-art-tech-v2
#   materials_attached: List of material file paths
#   portfolio_url: URL to portfolio or work samples

# --- Timeline ---
# timeline:
#   researched: ISO date
#   qualified: ISO date
#   materials_ready: ISO date
#   submitted: ISO date
#   acknowledged: ISO date
#   interview: ISO date
#   outcome_date: ISO date

# --- Conversion Tracking ---
# conversion:
#   response_received: boolean
#   response_type: acknowledgment | interview | rejection | offer | null
#   time_to_response_days: integer or null
#   feedback: Free text from reviewer/organization
#   channel: How the application was submitted
#     enum: direct | referral | linkedin | job_board | email | other
#   resume_variant: Which resume version was used (filename or path)
#   cover_letter_present: boolean — whether a cover letter or pitch was included
#   custom_answers: boolean — whether portal-specific questions were answered
#   follow_up_count: integer — number of follow-up actions taken
#   outcome_stage: Where in the funnel the outcome occurred
#     enum: resume_screen | phone_screen | technical | onsite | offer | null

# --- Follow-Up Tracking ---
# follow_up: List of follow-up actions for this entry
#   - date: ISO date (YYYY-MM-DD)
#     channel: Communication channel
#       enum: linkedin | email | phone | in_person | other
#     contact: Name/title of person contacted
#     type: Type of follow-up
#       enum: connect | dm | email | check_in | thank_you
#     note: Brief description
#     response: Whether a response was received
#       enum: none | replied | ignored | referred

# --- Activity Tracking ---
# last_touched: ISO date (YYYY-MM-DD) of last human review of this entry
#   Updated via `standup.py --touch <id>` or manual edit
#   Used by standup.py to detect stagnation (>7 days = stale)

# --- Outreach ---
# outreach: List of target-specific outreach actions taken or planned
#   - type: Action category
#     enum: pre_submission | warm_contact | info_session | post_submission | follow_up | reference_request
#   - contact: Person or entity name (null for impersonal actions)
#   - channel: Communication channel used
#     enum: email | linkedin | phone | in_person | webinar | other
#   - date: ISO date (YYYY-MM-DD)
#   - note: Brief description of the action
#   - status: Current state of this outreach action
#     enum: planned | done | waiting

# --- Recommendations ---
# recommendations: List of recommenders for applications that require letters
#   - name: Recommender's full name
#   - relationship: How you know them (e.g. "MFA thesis advisor", "former colleague")
#   - email: Contact email
#   - status: Current state of the request
#     enum: not_asked | asked | confirmed | submitted | declined
#   - asked_date: ISO date when you sent the request
#   - deadline: ISO date by which the letter must be submitted
#   - brief_sent: boolean — whether you sent them a brief about the opportunity
#   - note: Any relevant context

# --- Portal Fields ---
# portal_fields: Portal-specific field metadata for submission composition
#   platform: Portal name (matches target.portal)
#   fields: List of field definitions
#     - name: Field label as shown on the portal (e.g. "Artist Statement")
#       char_limit: Maximum characters (null if unknown)
#       word_limit: Maximum words (null if unknown)
#       format: Required format
#         enum: text | textarea | file_upload | url | dropdown | checkbox
#       file_types: Accepted file types for uploads (e.g. ["pdf", "jpg", "mp4"])
#       max_file_size_mb: Maximum file size in MB (null if unknown)
#       required: boolean
#       note: Any special instructions from the portal

# --- Withdrawal / Deprioritization ---
# withdrawal_reason: Structured reason when an entry is withdrawn or deprioritized
#   reason: Primary reason category
#     enum: missed_deadline | low_fit | effort_too_high | duplicate | ineligible | strategic_shift | personal | other
#   detail: Free text explanation
#   date: ISO date of the decision
#   reopen: boolean — whether this could be revisited in a future cycle

# --- Deferral ---
# deferral: Structured reason when status is 'deferred' (recommended when deferred)
#   reason: Why the entry is deferred
#     enum: portal_paused | cycle_not_open | pending_materials | external_dependency | strategic_hold
#   resume_date: ISO date (YYYY-MM-DD) when to re-check availability (optional)
#   note: Free text explanation (optional)

# --- Metadata ---
# tags: List of strings (omega criteria cross-refs, categories)
# source: Origin document reference
# notes: Free text for context, reviewer advice, special instructions

# --- Example ---
example:
  id: creative-capital-2027
  name: Creative Capital 2027 Open Call
  track: grant
  status: staged
  outcome: null

  target:
    organization: Creative Capital
    url: https://creative-capital.org/
    application_url: https://creative-capital.org/creative-capital-award/award-application/
    portal: custom

  deadline:
    date: "2026-04-02"
    time: "15:00 ET"
    type: hard

  amount:
    value: 50000
    currency: USD
    type: lump_sum
    benefits_cliff_note: "Exceeds Medicaid -> Essential Plan. Call NYLAG."

  fit:
    score: 9
    identity_position: systems-artist
    framing: "adventurous and imaginative interdisciplinary work"
    lead_organs: [IV, I, META]
    dimensions:
      mission_alignment: 10
      evidence_match: 9
      track_record_fit: 8
      financial_alignment: 5
      effort_to_value: 8
      strategic_value: 10
      deadline_feasibility: 8
      portal_friction: 6

  submission:
    effort_level: deep
    blocks_used:
      artist_statement: identity/2min
      project_description: projects/organvm-system
      methodology: methodology/ai-conductor
    variant_ids:
      cover_letter: cover-letters/grant-art-tech-v2
    materials_attached:
      - resumes/creative-tech-2026.pdf
    portfolio_url: https://4444j99.github.io/portfolio/

  timeline:
    researched: "2026-02-14"
    qualified: "2026-02-16"
    materials_ready: "2026-02-18"
    submitted: null
    acknowledged: null
    interview: null
    outcome_date: null

  conversion:
    response_received: false
    response_type: null
    time_to_response_days: null
    feedback: null
    channel: direct
    resume_variant: resumes/creative-tech-2026.pdf
    cover_letter_present: true
    custom_answers: false
    follow_up_count: 0
    outcome_stage: null

  follow_up: []

  last_touched: "2026-02-18"

  outreach:
    - type: pre_submission
      contact: null
      channel: webinar
      date: "2026-03-01"
      note: "Attended Creative Capital info session"
      status: done

  tags: ["#5", "#9"]
  source: 10-funding-strategy.md
  notes: |
    HIGHEST-FIT TARGET. Panelist advice: "Describe your project
    with the clarity of a children's book."
